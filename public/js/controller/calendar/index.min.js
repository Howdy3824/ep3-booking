(function(){var e;var k;var d=false;var i;var a=300;var j=350;$(document).ready(function(){e=$(".calendar-table");e.on("click","a.calendar-cell",function(o){o.preventDefault();if(!k){o.stopPropagation();l($(this).attr("href"))}});$(window).resize(n);$("body").on("click","#squarebox-overlay",function(){h()});$("a.calendar-cell").hover(function(){var p=$(this);var o=p.attr("class");var q=o.match(/cc-group-\d+/);$("a."+q).css({opacity:0.9,"background-color":p.css("background-color")});p.css("opacity",1)},function(){var o=$(this).attr("class");var p=o.match(/cc-group-\d+/);$("a."+p).removeAttr("style")});c();$(window).resize(c);if($("body").height()<576){$(".content-panel").css("padding",30)}});function l(o){var p=$("#calendar-squarebox-template");if(p.length){b(p.html())}else{b('<div class="padded">...</p>')}k.clearQueue().delay(a).queue(function(){$.ajax({cache:false,data:{ajax:true},dataType:"html",error:function(){if(k&&!d){window.location.href=o}},success:function(q){if(k&&!d){b(q);k.find(".no-ajax").remove();k.find(".datepicker").datepicker();k.find(".inline-label-container").each(function(){updateInlineLabel($(this))});n();k.on("click","a.squarebox-internal-link",function(r){r.preventDefault();l($(this).attr("href"))});k.on("click","a.squarebox-close-link",function(r){r.preventDefault();h()})}},url:o});$(this).dequeue()})}function f(){if(!i){i=$('<div id="squarebox-overlay"></div>').css({position:"absolute","z-index":1532,opacity:0,width:$(document).width(),height:$(document).height(),left:0,top:0,background:"#333"});$("body").prepend(i)}if(!k){k=$('<div class="panel"></div>').css({position:"absolute","z-index":1536});$("body").prepend(k)}}function b(o){f();k.clearQueue();k.css("opacity",0.01);k.html(o);n();k.fadeTo(j,1);m()}function n(){if(k){var o;if($("body").height()>$(window).height()){o=window}else{o=e}k.position({my:"center",at:"center",of:o})}}function h(){if(k){d=true;k.clearQueue().fadeOut(j,function(){if(k){k.remove();k=undefined}d=false});g()}}function m(){if(i){i.clearQueue().fadeTo(j,0.75)}}function g(){if(i){i.clearQueue().fadeTo(j,0,function(){if(i){i.remove();i=undefined}})}}function c(){var p=$("#calendar").width();var o=$(".calendar-time-col, .calendar-square-col").width();var q=$(".calendar-date-col:visible");if(p&&o&&q.length){q.width(Math.floor((p-o)/q.length))}}})();