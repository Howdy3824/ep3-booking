(function(){var b;var h;var g=false;var e=350;$(document).ready(function(){b=$("#admin-menu-link");b.on("click",function(j){j.preventDefault();if(!h){j.stopPropagation();d(b.attr("href"))}else{a()}});$(window).resize(i);$("body").on("click",function(j){if(h){var k=$(j.target);if(k[0]!==h[0]&&k.closest(".panel")[0]!==h[0]){a()}}})});function d(j){var k=$("#calendar-squarebox-template");if(k.length){c(k.html())}h.queue(function(){$.ajax({cache:false,data:{ajax:true},dataType:"html",error:function(){if(h&&!g){window.location.href=j}},success:function(l){if(h&&!g){c(l);h.find(".no-ajax").remove();i()}},url:j});$(this).dequeue()})}function f(){if(!h){h=$('<div class="panel"></div>').css({position:"absolute","z-index":1536});$("body").prepend(h)}}function c(j){f();h.clearQueue();h.css("opacity",0.01);h.html(j);i();h.fadeTo(e,1)}function i(){if(h){h.position({my:"center top+8",at:"center bottom",of:b})}}function a(){if(h){g=true;h.clearQueue().fadeOut(e,function(){h.remove();h=undefined;g=false})}}})();