(function(){$(document).ready(function(){$("#sb-customization-panel-warning").remove();$("#sb-customization-panel").show();$("#sb-quantity").on("change keyup focusout",c);c();$(".sb-player-names input").on("change keyup focusout",a);$(".sb-product").on("change",b)});function c(){var j=$("#sb-quantity").val();var h=$("#sb-button");if(h.length){var g=h.attr("href");var d=g.replace(/q=[0-9]+/,"q="+j);h.attr("href",d)}var e=$(".sb-player-names");if(e.length){if(j>1){$(".sb-player-name").hide();for(var f=2;f<=j;f++){$(".sb-player-name-"+f).show()}e.show()}else{e.hide()}$(window).trigger("squarebox.update")}a()}function a(){var d=$("#sb-button");if(d.length){var i=$("#sb-quantity").val();var l=$(".sb-player-names-mode").data("mode");var e=$(".sb-player-names input:visible");if(i>1){var k=e.serializeArray();var h=JSON.stringify(k);var g="pn="+encodeURIComponent(h)}else{var g="pn=0"}d.css({opacity:1});if(l=="required"){e.each(function(){if(!$(this).val()){d.css({opacity:0})}})}var f=d.attr("href");var j=f.replace(/pn=[^&]+/,g);d.attr("href",j)}}function b(){var f=$("#sb-button");if(f.length){var g="";$(".sb-product").each(function(h,i){var k=$(i).data("spid");var j=$(i).val();if(j>0){g+=k+":"+j+","}});if(g){g=g.substr(0,g.length-1)}else{g="0"}var e=f.attr("href");var d=e.replace(/p=[0-9\:\,]+/,"p="+g);f.attr("href",d)}}})();